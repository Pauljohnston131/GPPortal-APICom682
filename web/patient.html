<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>NHS Patient Portal – Upload Medical Evidence</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <style>
        body { font-family: 'Roboto', sans-serif; background: #f5f8fa; margin: 0; }
        .nhs-header {
            background: #005EB8; color: white; padding: 20px 0; text-align: center; font-size: 28px; font-weight: 700;
        }
        .nhs-logo { font-size: 36px; font-weight: bold; }
        .container { max-width: 1000px; }
        .card { border: none; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        .upload-area {
            border: 3px dashed #0072CE; border-radius: 12px; padding: 40px; text-align: center; background: #f8fbff;
            transition: all 0.3s; cursor: pointer;
        }
        .upload-area:hover { background: #e8f4ff; border-color: #005EB8; }
        .preview-img { width: 90px; height: 90px; object-fit: cover; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .status-badge {
            padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 500;
        }
        .status-pending { background: #ffe6e6; color: #c41e3a; }
        .status-under_review { background: #fff4e6; color: #e67e22; }
        .status-reviewed { background: #e6f7e6; color: #27ae60; }
        .status-action_required { background: #e6f0ff; color: #2980b9; }
        .footer { margin-top: 60px; text-align: center; color: #666; font-size: 14px; }
    </style>
</head>
<body>

<div class="nhs-header">
    <div class="nhs-logo">NHS</div>
    Patient Evidence Portal
</div>

<div class="container mt-5">
    <div class="card p-4 mb-5">
        <h3 class="mb-3">Upload Evidence for Your GP</h3>
        <p class="text-muted">Securely share photos or documents (e.g. rash, wound, prescription) with your doctor.</p>

        <form id="uploadForm" class="mt-4">
            <div class="row g-3">
                <div class="col-md-4">
                    <label class="form-label fw-bold">Your Patient ID</label>
                    <input id="patientId" class="form-control form-control-lg" placeholder="e.g. P004" required>
                </div>
                <div class="col-md-8">
                    <label class="form-label fw-bold">Choose File</label>
                    <div class="upload-area" id="dropArea">
                        <input type="file" id="fileInput" accept="image/*,application/pdf" required style="display:none">
                        <p class="mb-2"><strong>Click to upload</strong> or drag & drop</p>
                        <p class="text-muted small">Images (JPG, PNG) or PDF • Max 10MB</p>
                    </div>
                </div>
            </div>

            <div class="progress mt-3" style="height:8px; display:none;">
                <div class="progress-bar bg-success" style="width:0%"></div>
            </div>

            <button type="submit" class="btn btn-primary btn-lg mt-4 px-5">Upload to GP</button>
        </form>

        <div id="msg" class="mt-3 fw-bold"></div>
    </div>

    <h4 class="mb-4">Your Uploaded Evidence</h4>
    <button id="refreshBtn" class="btn btn-outline-primary mb-3">Refresh List</button>
    <div id="recordsList" class="row g-4"></div>
</div>

<div class="footer py-4">
    © 2025 NHS Digital • Your data is encrypted and only visible to your GP practice
</div>

<script src="js/bootstrap.bundle.min.js"></script>
<script src="js/api.js"></script>
<script src="js/patient.js"></script>
<script>
    // Enhanced drag & drop
    const dropArea = document.getElementById('dropArea');
    ['dragenter', 'dragover'].forEach(e => dropArea.addEventListener(e, () => dropArea.style.background = '#d0e8ff'));
    ['dragleave', 'drop'].forEach(e => dropArea.addEventListener(e, () => dropArea.style.background = '#f8fbff'));
    dropArea.addEventListener('drop', e => {
        e.preventDefault();
        if (e.dataTransfer.files[0]) fileInput.files = e.dataTransfer.files;
    });
    dropArea.addEventListener('click', () => fileInput.click());
</script>
</body>
</html>